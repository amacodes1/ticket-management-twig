<section
  class="relative py-12 sm:py-16 px-4 sm:px-6 md:px-16 lg:px-20 text-[#111827] dark:text-white"
>
  <div class="max-w-6xl mx-auto text-center mb-8 sm:mb-12">
    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight">
      The Challenges Companies Face
    </h2>
    <p class="mt-3 text-[#111827]/70 dark:text-white/70 text-sm sm:text-base md:text-lg px-4">
      Why modern teams turn to
      <span class="text-[#9B8AFB] font-semibold">TicketApp</span> for better
      support management
    </p>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-10 mt-12 sm:mt-16">
    {% set challenges = [ {id:1, number:200, suffix:'B+', title:'Customer
    Requests Lost Yearly', text:'Over $200B worth of customer requests are lost
    yearly due to inefficient ticketing and poor support workflows.'}, {id:2,
    number:25, suffix:'M+', title:'Unresolved Tickets Monthly', text:'More than
    25 million tickets go unresolved every month, leading to customer churn and
    revenue loss.'}, {id:3, number:70, suffix:'%', title:'Delayed Responses',
    text:'70% of support teams fail to respond within expected timeframes,
    reducing overall customer satisfaction.'}, {id:4, number:32, suffix:'%',
    title:'Reduced Productivity', text:'Companies report a 32% drop in
    productivity when managing requests without a unified ticketing solution.'}
    ] %} {% for item in challenges %}
    <div
      class="flex flex-col items-start text-left relative challenge-card px-2 sm:px-0"
      data-number="{{ item.number }}"
      data-suffix="{{ item.suffix }}"
    >
      <div
        class="w-[30%] sm:w-[40%] h-1 bg-[#9B8AFB] dark:bg-[#9B8AFB]/70 mb-4 sm:mb-6"
      ></div>
      <h3
        class="text-3xl sm:text-4xl font-extrabold text-[#9B8AFB] dark:text-[#B8AFFF] count-target"
      >
        0{{ item.suffix }}
      </h3>
      <h4 class="text-base sm:text-lg md:text-xl font-semibold mt-2 sm:mt-3">{{ item.title }}</h4>
      <p
        class="mt-2 text-[#111827]/70 dark:text-white/70 text-sm leading-relaxed"
      >
        {{ item.text }}
      </p>
    </div>
    {% endfor %}
  </div>
</section>

<script>
function countUp(element, target, suffix, duration = 2000) {
  let start = 0;
  const increment = target / (duration / 16);
  const timer = setInterval(() => {
    start += increment;
    if (start >= target) {
      element.textContent = target + suffix;
      clearInterval(timer);
    } else {
      element.textContent = Math.floor(start) + suffix;
    }
  }, 16);
}

document.addEventListener('DOMContentLoaded', function() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const card = entry.target;
        const target = card.querySelector('.count-target');
        const number = parseInt(card.dataset.number);
        const suffix = card.dataset.suffix;
        countUp(target, number, suffix);
        observer.unobserve(card);
      }
    });
  });
  
  document.querySelectorAll('.challenge-card').forEach(card => {
    observer.observe(card);
  });
});
</script>